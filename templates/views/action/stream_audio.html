{{ define "main" }}
{{ $MediaProbe := .Data.MediaProbe}}
{{ with .Data.ExportTag }}
<audio class="player"
       crossorigin="anonymous"
       preload="{{ .Preload }}"
       {{ if .Poster }}poster="{{ .Poster }}" {{ end }}
       {{ if $MediaProbe }}data-duration="{{ $MediaProbe | getDurationSec }}" {{ end }}
       controls
       autoplay
       data-settings="{{ $.Data.Settings | json }}">
    {{ range .Sources }}
    <source src="{{ .Src }}" type="{{ .Type }}">
    {{ end }}
</audio>
{{ end }}
<script async src="{{ "action/audio.js" | asset }}"></script>
{{ end }}